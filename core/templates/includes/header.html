{% load static %}
<header id="header" class="navbar navbar-expand-lg navbar-end navbar-light">
    <div class="container">
      <nav class="js-mega-menu navbar-nav-wrap">
        <!-- Default Logo -->
        <a class="navbar-brand" href="{% url 'pages:home' %}" aria-label="Front">
          <img class="navbar-brand-logo" src="{% static 'svg/logos/logo.svg' %}" alt="Logo">
        </a>
        <!-- End Default Logo -->

        <!-- Toggler -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
          aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-default">
            <i class="bi-list"></i>
          </span>
          <span class="navbar-toggler-toggled">
            <i class="bi-x"></i>
          </span>
        </button>
        <!-- End Toggler -->

        <!-- Collapse -->
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
          <ul class="navbar-nav">
            
            <li class="nav-item">
              <a class="nav-link {% if request.resolver_match.view_name == 'pages:home' %}active{% endif %}" href="{% url 'pages:home' %}">صفحه اصلی</a>
            </li>

            <li class="nav-item">
              <a class="nav-link {% if request.resolver_match.view_name == 'shop:product_list' %}active{% endif %}" href="{% url 'shop:product_list' %}">لیست محصولات</a>
            </li>

            <li class="nav-item">
              <a class="nav-link {% if request.resolver_match.view_name == 'pages:contact_us' %}active{% endif %}" href="{% url 'pages:contact_us' %}">ارتباط با ما</a>
            </li>

            <li class="nav-item">
              <a class="nav-link {% if request.resolver_match.view_name == 'pages:about_us' %}active{% endif %}" href="{% url 'pages:about_us' %}">درباره ما</a>
            </li>

            <!-- Pages -->
            <li class="hs-has-mega-menu nav-item" data-hs-mega-menu-item-options='{
                  "desktop": {
                    "position": "right",
                    "maxWidth": "27rem"
                  }
                }'>
              <a id="pagesMegaMenu" class="hs-mega-menu-invoker nav-link dropdown-toggle " aria-current="page" href="#"
                role="button" data-bs-toggle="dropdown" aria-expanded="false">صفحات</a>

              <!-- Mega Menu -->
              <div class="hs-mega-menu dropdown-menu" aria-labelledby="pagesMegaMenu" style="min-width: 27rem;">
                <div class="navbar-dropdown-menu-inner">
                  <span class="dropdown-header">عناصر</span>

                  <div class="row">
                    <div class="col-sm mb-3 mb-sm-0">
                      <a class="dropdown-item " href="#">دسته بندی ها</a>

                      <a class="dropdown-item " href="{%url 'cart:cart_summary' %}">سبد خرید</a>
                    </div>
                    <!-- End Col -->

                    <div class="col-sm">

                      <a class="dropdown-item " href="{% url "pages:about_us" %}">درباره ما</a>
                      {% if not request.user.is_authenticated %}
                      <a class="dropdown-item " href="{% url "accounts:register" %}">ثبت نام</a>
                      {% else %}
                      <a class="dropdown-item " href="{% url "dashboard:redirect_dashboard" %}">پروفایل </a>

                      {% endif %}
                    </div>
                    <!-- End Col -->
                  </div>
                  <!-- End Row -->
                </div>

                <!-- Mega Menu Banner -->
                <div class="navbar-dropdown-menu-shop-banner">
                  <div class="d-flex">
                    <div class="flex-shrink-0">
                      <img class="navbar-dropdown-menu-shop-banner-img" src="{% static 'img/mockups/img4.png' %}"
                        alt="Image Description">
                    </div>

                    <div class="flex-grow-1 p-4">
                      <span class="h4 d-block text-primary">برنده تی شرت</span>
                      <p>یکی از تی شرت های برند Front ما را برنده شوید.</p>
                      <a class="btn btn-sm btn-soft-primary btn-transition" href="{% url "pages:home" %}">بیشتر بدانید <i
                          class="bi-chevron-left small"></i></a>
                    </div>
                  </div>
                </div>
                <!-- End Mega Menu Banner -->
              </div>
              <!-- End Mega Menu -->
            </li>
            <!-- End Pages -->

            <li class="nav-item">
              <!-- Search -->
              <button class="btn btn-ghost-secondary btn-icon" type="button" data-bs-toggle="offcanvas"
                data-bs-target="#offcanvasNavbarSearch" aria-controls="offcanvasNavbarSearch">
                <i class="bi-search"></i>
              </button>
              <!-- End Search -->

              <!-- Shopping Cart -->
              <button type="button" class="btn btn-ghost-secondary btn-icon" type="button" data-bs-toggle="offcanvas"
                data-bs-target="#offcanvasNavbarShoppingCart" aria-controls="offcanvasNavbarShoppingCart">
                <i class="bi-basket"></i>
                <span class="cart-item-count" id='cart-item-count'>{{ cart|length }}</span>
              </button>
              <!-- End Shopping Cart -->
              {% if not request.user.is_authenticated %}
                <a class="btn btn-primary btn-transition" href="{% url 'accounts:login' %}">ورود</a>
              {% else %}
                
                  <button class="btn btn-icon btn-ghost-sedondary" data-bs-toggle="dropdown" aria-expanded="false">
                    <span class="avatar avatar-sm avatar-circle">
                      <img class="avatar-img" src="{{ request.user.profile.image.url }}" alt="Image Description">
                    </span>
                  </button>
                
                  <div class="dropdown-menu">
                    <a class="dropdown-item" href="{% url 'dashboard:redirect_dashboard' %}">پروفایل</a>
                    <a class="dropdown-item" href="{% url 'accounts:logout' %}">خروج از حساب</a>
                  </div>

                
              {% endif %}
            </li>
          </ul>
        </div>
        <!-- End Collapse -->
      </nav>
    </div>
</header>